[gd_scene load_steps=5 format=3 uid="uid://cg2eocn0aoog1"]

[ext_resource type="Script" path="res://src/agent/agent.gd" id="1_h7mfl"]
[ext_resource type="Script" path="res://src/networking/client.gd" id="1_p0f3u"]
[ext_resource type="PackedScene" uid="uid://b7ivcx6esptyt" path="res://src/agent_terrain/planet_world.tscn" id="2_ai3rw"]
[ext_resource type="Texture2D" uid="uid://b0awe1kjsi4qc" path="res://assets/agent/robot_interface_background.png" id="2_d3u4v"]

[node name="Agent" type="Node2D"]
script = ExtResource("1_h7mfl")

[node name="RobotInterfaceBackground" type="Sprite2D" parent="."]
position = Vector2(567.333, 315.5)
scale = Vector2(1.22778, 1.22778)
texture = ExtResource("2_d3u4v")

[node name="Networking" type="Node2D" parent="."]
script = ExtResource("1_p0f3u")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 1152.0
offset_bottom = 648.0
grow_horizontal = 2
grow_vertical = 2

[node name="BTNvbox" type="VBoxContainer" parent="UI"]
layout_mode = 1
anchors_preset = -1
anchor_bottom = 1.0
offset_left = 25.0
offset_right = 219.0
grow_vertical = 2
alignment = 1

[node name="UpBTN" type="Button" parent="UI/BTNvbox"]
layout_mode = 2
text = "^"

[node name="DownBTN" type="Button" parent="UI/BTNvbox"]
layout_mode = 2
text = "\\/"

[node name="LeftBTN" type="Button" parent="UI/BTNvbox"]
layout_mode = 2
text = ">"

[node name="RightBTN" type="Button" parent="UI/BTNvbox"]
layout_mode = 2
text = "<
"

[node name="PickupBTN" type="Button" parent="UI/BTNvbox"]
layout_mode = 2
text = "Pickup"

[node name="SendPingBTN" type="Button" parent="UI/BTNvbox"]
layout_mode = 2
text = "Send Ping"

[node name="AgentViewportContainer" type="SubViewportContainer" parent="UI"]
layout_mode = 1
anchors_preset = -1
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -1045.0
offset_top = 89.0
offset_right = -245.0
offset_bottom = 241.0
grow_horizontal = 0
grow_vertical = 2
scale = Vector2(0.6, 0.6)
stretch = true

[node name="SubViewport" type="SubViewport" parent="UI/AgentViewportContainer"]
handle_input_locally = false
size = Vector2i(800, 800)
render_target_update_mode = 4

[node name="world" parent="UI/AgentViewportContainer/SubViewport" instance=ExtResource("2_ai3rw")]

[connection signal="api_data_received" from="Networking" to="." method="_on_networking_api_data_received"]
[connection signal="button_up" from="UI/BTNvbox/PickupBTN" to="Networking" method="_on_pickup_btn_button_up"]
[connection signal="button_down" from="UI/BTNvbox/SendPingBTN" to="." method="_on_send_ping_btn_button_down"]
[connection signal="api_move" from="UI/AgentViewportContainer/SubViewport/world" to="." method="_on_world_api_move"]
